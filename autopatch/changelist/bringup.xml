<?xml version="1.0" encoding="utf-8"?>
<features>

    <feature require="MUST" description="Baidu UI." >
        <revise action="MERGE" target="framework-res/AndroidManifest.xml" />
        <revise action="MERGE" target="framework.jar.out/smali/android/content/res/AssetManager.smali"
                               patch ="revise-AssetManager.xml" />
    </feature>

    <feature require="MUST" description="Unpack native libs for system app" >
        <revise action="MERGE" target="services.jar.out/smali/com/android/server/pm/PackageManagerService.smali"
                               patch ="revise-PackageManagerService.xml" />
    </feature>

    <feature require="MUST" description="Load Baidu service" >
        <revise action="MERGE" target="services.jar.out/smali/com/android/server/ServerThread.smali"
                               patch ="revise-ServerThread.xml" />
    </feature>

    <feature require="MUST" description="Optimization for caller location and potograph">
        <revise action="MERGE"   target="framework.jar.out/smali/com/android/internal/telephony/CallerInfo.smali" />
        <revise action="REPLACE" target="framework.jar.out/smali/com/android/internal/telephony/CallerInfoAsyncQuery*"  />
    </feature>

    <feature require="MUST" description="Baidu SD card strategy">
        <revise action="MERGE" target="framework.jar.out/smali/android/os/Environment.smali" />
        <revise action="MERGE" target="framework.jar.out/smali/android/os/Environment$UserEnvironment.smali" />
        <revise action="ADD"   target="services.jar.out/smali/com/android/server/MountService$SdType.smali" />
    </feature>

    <feature require="MUST" description="Add some missed fields and method">
        <!-- Baidu widget extention class-->
        <revise action="ADD"   target="framework.jar.out/smali/android/util/FeatureData.smali"  />
        <revise action="ADD"   target="framework.jar.out/smali/com/android/internal/widget/RecycleFilletListView.smali" />

        <revise action="MERGE" target="telephony-common.jar.out/smali/com/android/internal/telephony/CallManager.smali"  />
        <revise action="MERGE" target="framework.jar.out/smali/android/app/Notification.smali" />

        <!-- Missed method isLowMemeory for reducing 512M device -->
        <revise action="MERGE" target="framework.jar.out/smali/android/app/ActivityManager.smali" />

        <!-- Missed AIDL interface. The whole route of method should be merged -->
        <revise action="MERGE" target="framework.jar.out/smali/android/telephony/TelephonyManager.smali" />
        <revise action="MERGE" target ="telephony-common.jar.out/smali/com/android/internal/telephony/IccCard.smali"  />
        <revise action="MERGE" target="telephony-common.jar.out/smali/com/android/internal/telephony/PhoneSubInfo.smali"  />
        <revise action="MERGE" target="framework.jar.out/smali/com/android/internal/telephony/IPhoneSubInfo.smali" />
        <revise action="MERGE" target="framework.jar.out/smali/com/android/internal/telephony/IPhoneSubInfo$Stub$Proxy.smali" />
    </feature>

    <feature require="OPTION" description="Missed methods and fields" >
        <!-- Quick boot feature -->
        <revise action="REPLACE" target="services.jar.out/smali/com/android/server/am/QuickbootActivityManagerServiceHook*" />
    </feature>

    <feature require="MUST" description="set memory persistent for baidu launcher" >
        <revise action="MERGE" target="framework.jar.out/smali/android/app/ActivityManager.smali" />
        <revise action="MERGE" target="framework.jar.out/smali/android/app/ActivityManagerNative.smali" />
        <revise action="MERGE" target="framework.jar.out/smali/android/app/ActivityManagerProxy.smali" />
        <revise action="MERGE" target="framework.jar.out/smali/android/app/IActivityManager.smali" />
        <revise action="MERGE" target="services.jar.out/smali/com/android/server/am/ActivityManagerService.smali" />
    </feature>

    <feature require="OPTION" description="Modification in boot.img" >
        <!-- Root and enable adb on booing -->
        <revise action="MERGE" target="vendor/BOOT/RAMDISK/default.prop" patch="revise-default.prop.xml" />

        <!-- Launch Baidu services on booting -->
        <revise action="MERGE"  target="vendor/BOOT/RAMDISK/init.rc"  patch="revise-init.rc.xml" />
    </feature>

</features>
